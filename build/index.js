!function(){"use strict";var e,t={728:function(e,t,a){var o=window.wp.element,l=window.wp.blocks,r=window.wp.i18n,c=window.jQuery,n=a.n(c);document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".traficom-block"),t=n()("html").attr("lang");e.forEach((a=>{const o=n()(a.querySelector(".traficom-block-checked-year")).select2(),l=n()(a.querySelector(".traficom-block-model")).select2(),r=a.querySelector(".traficom-data-table");let c={};function i(e,t,a){t.forEach(((t,o)=>{0===o?e.append(new Option(t,a[o],!0,!0)):e.append(new Option(t,a[o]))}))}n()(o).add(l).on("change",(e=>{const t=o.val(),a=encodeURIComponent(l.val());t&&a&&(c={year:t,model:a},n()(r).DataTable().ajax.reload())})),n().ajax({url:"/wp-json/traficom-api/v1/dropdown-values/",dataType:"json",type:"GET",success:a=>{e.forEach((e=>{const t=n()(e.querySelector(".traficom-block-checked-year")),o=n()(e.querySelector(".traficom-block-model"));c={year:a.checkedYears[0],year_key:a.checkedYearsKeys[0],model:a.models[0],model_key:a.modelsKeys[0]},i(t,a.checkedYears,a.checkedYearsKeys),i(o,a.models,a.modelsKeys)})),n()(r).DataTable({ajax:{url:"/wp-json/traficom-api/v1/disqualified-cars/",type:"GET",dataSrc:"data",data:function(){return{year:c.year_key,model:c.model_key}}},language:{url:"//cdn.datatables.net/plug-ins/1.13.4/i18n/"+t+".json"},data:[],columns:[{data:"model"},{data:"first_year"},{data:"amount"},{data:"average"},{data:"median"},{data:"rejection_percent"},{data:"approved"},{data:"rejected"}],responsive:!0})}})}))})),(0,l.registerBlockType)("traficom-block/traficom-data",{title:(0,r.__)("Traficom Data","traficom-block"),icon:"list-view",category:"widgets",edit(){return(0,o.createElement)("div",{className:"traficom-block-editor"},(0,o.createElement)("p",null,(0,r.__)("Tämä lohko mahdollistaa katsastusdatan hakemisen vuoden ja autonmallin perusteella.","traficom-block")))},save(){return(0,o.createElement)("div",{className:"traficom-block"},(0,o.createElement)("label",{className:"traficom-block-checked-year-label traficom-block-label traficom-block-half-label"},(0,r.__)("Katsastusvuosi:","traficom-block"),(0,o.createElement)("select",{className:"traficom-block-checked-year traficom-select2"})),(0,o.createElement)("label",{className:"traficom-block-model-label traficom-block-label traficom-block-full-label"},(0,r.__)("Automalli:","traficom-block"),(0,o.createElement)("select",{className:"traficom-block-model traficom-select2",multiple:!0})),(0,o.createElement)("table",{className:"traficom-data-table",width:"100%"},(0,o.createElement)("thead",null,(0,o.createElement)("tr",null,(0,o.createElement)("th",null,(0,r.__)("Automalli","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("Käyttöönottovuosi","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("Katsastusmäärä","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("KA. ajokilometrit","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("Mediaani ajokilometrit","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("Hylkäysprosentti","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("Hyväksytty","traficom-block")),(0,o.createElement)("th",null,(0,r.__)("Hylätty","traficom-block"))))))}})}},a={};function o(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=function(t,a,l,r){if(!a){var c=1/0;for(s=0;s<e.length;s++){a=e[s][0],l=e[s][1],r=e[s][2];for(var n=!0,i=0;i<a.length;i++)(!1&r||c>=r)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(n=!1,r<c&&(c=r));if(n){e.splice(s--,1);var m=l();void 0!==m&&(t=m)}}return t}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[a,l,r]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,r,c=a[0],n=a[1],i=a[2],m=0;if(c.some((function(t){return 0!==e[t]}))){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(i)var s=i(o)}for(t&&t(a);m<c.length;m++)r=c[m],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(s)},a=self.webpackChunktraficom_data_block=self.webpackChunktraficom_data_block||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var l=o.O(void 0,[431],(function(){return o(728)}));l=o.O(l)}();